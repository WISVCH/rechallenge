var Events;!function(n){Events={init:function(){Events.settings={calendar:n("#calendar")},n.fullCalendar&&(Events.initCalendar(),Events.binds())},binds:function(){Events.settings.calendar.on("click tap",".fc-button",function(){n(this).blur()}),n("#event-filter-dropdown").find("input:checkbox").on("change",function(){Events.updateCurrentEventFilter(),Events.settings.calendar.fullCalendar("rerenderEvents")}),n(window).on("changed.zf.mediaquery",function(){Foundation.MediaQuery.atLeast("large")?Events.settings.calendar.fullCalendar("changeView","month"):Events.settings.calendar.fullCalendar("changeView","listMonth")})},initCalendar:function(){Events.settings.calendar.fullCalendar({firstDay:1,height:"auto",defaultView:Foundation.MediaQuery.atLeast("large")?"month":"listMonth",customButtons:{filterButton:{text:"Filter"}},header:{left:"title",center:"",right:"filterButton today prev, next"},events:{url:"/wp-json/wp/v2/events/fullcalendar"},timeFormat:"H:mm",displayEventEnd:!0,handleWindowResize:!1,viewRender:Events.customViewRender,eventRender:Events.customEventRender,eventAfterRender:Events.customEventAfterRender})},updateCurrentEventFilter:function(){var t=[];n("#event-filter-dropdown input:checkbox:checked").each(function(){t.push(n(this).data("slug"))}),Events.settings.calendar.data("currentFilter",t)},customViewRender:function(){void 0===n(".fc-filterButton-button").attr("data-toggle")&&(n(".fc-filterButton-button").attr("data-toggle","event-filter-dropdown"),new Foundation.Dropdown(n("#event-filter-dropdown"))),Events.updateCurrentEventFilter()},customEventRender:function(t){if(t.categories){var e=Events.settings.calendar.data("currentFilter");if(n(t.categories).filter(e).length<=0)return!1}},customEventAfterRender:function(t,e){t.start.isAfter(Events.settings.calendar.fullCalendar("getView").intervalEnd)&&e.addClass("next-month"),t.primary_category?e.addClass("cat-"+t.primary_category):t.categories&&e.addClass("cat-"+t.categories[0]),t.start.isSame(t.end,"day")||e.find(".fc-time").html(t.start.format("H:mm"))}}}(jQuery);