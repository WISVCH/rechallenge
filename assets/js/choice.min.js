var CHoice;!function(c){CHoice={init:function(e){CHoice.url=window.choice_url,CHoice.settings={blueprintItem:"<li class='accordion-item' data-accordion-item><a href='#' class='accordion-title clearfix'>{% courseName %}</a><div class='accordion-content' data-tab-content style='display: none;'><h4>Exams/Summaries</h4><table cellspacing='0'><thead><tr><th width='150px'>Course Code</th><th>Exam</th><th width='150px'>Answers</th><th width='50px'></th></tr></thead><tbody>{% content %}</tbody></table></li>",blueprintItemNoResult:"<li class='accordion-item' data-accordion-item><a href='#' class='accordion-title clearfix'>No courses found that match your search criteria.</li>",blueprintRow:"<tr><td>{% courseCode %}</td><td>{% name %}</td><td><span class='ch-{% answers %}'></span></td><td><a target='_blank' href='"+CHoice.url+"document/exam/{% documentId %}' class='button tiny'><span class='ch-file-o'></span></a></td></tr>",blueprintRowNoResult:"<tr><td colspan='4'>No exams available yet.</td></tr>"},CHoice.initChoice(),CHoice.binds()},binds:function(){c("#searchQuery").on("keyup",CHoice._debounce(CHoice.searchCourses,250)),c("#searchStudy, #searchProgram").on("change",CHoice._debounce(CHoice.searchCourses,250))},initChoice:function(){c.ajax({url:CHoice.url+"course/active",async:!1,dataType:"json",success:function(e){CHoice.handleGetCourses(e)}})},searchCourses:function(){c.ajax({url:CHoice.url+"course/active/search",data:{study:c("#searchStudy").val(),program:c("#searchProgram").val(),query:c("#searchQuery").val()},async:!1,dataType:"json",success:function(e){CHoice.handleGetCourses(e)}})},handleGetCourses:function(e){c("#choice-accordion").empty(),0<e.content.length?c.each(e.content,function(e,t){var o=t.code+" "+t.name,o=CHoice.settings.blueprintItem.split("{% courseName %}").join(o),t=CHoice.handleGetCourseExamResponse(t.exam),o=o.split("{% content %}").join(t);c("#choice-accordion").append(o)}):c("#choice-accordion").append(CHoice.settings.blueprintItemNoResult),Foundation.reInit(c("#choice-accordion"))},handleGetCourseExamResponse:function(e){var n="";return 0<e.length?c.each(e,function(e,t){var o=CHoice.settings.blueprintRow.split("{% courseCode %}").join(t.course.code),c=t.date.month.toLowerCase().replace(/\b[a-z]/g,function(e){return e.toUpperCase()}),c=t.name+" "+c+" "+t.date.dayOfMonth+", "+t.date.year;o=(o=(o=o.split("{% name %}").join(c)).split("{% documentId %}").join(t.id)).split("{% answers %}").join(t.includingAnswers?"check":"ban"),n+=o}):n=CHoice.settings.blueprintRowNoResult,n},_debounce:function(c,n,a){var i;return function(){var e=this,t=arguments,o=a&&!i;clearTimeout(i),i=setTimeout(function(){i=null,a||c.apply(e,t)},n),o&&c.apply(e,t)}}}}(jQuery);