var CHoice;!function(e){CHoice={init:function(e){CHoice.url=window.choice_url,CHoice.settings={blueprintItem:"<li class='accordion-item' data-accordion-item><a href='#' class='accordion-title clearfix'>{% courseName %}</a><div class='accordion-content' data-tab-content style='display: none;'><h4>Exams/Summaries</h4><table cellspacing='0'><thead><tr><th width='150px'>Course Code</th><th>Exam</th><th width='150px'>Answers</th><th width='50px'></th></tr></thead><tbody>{% content %}</tbody></table></li>",blueprintItemNoResult:"<li class='accordion-item' data-accordion-item><a href='#' class='accordion-title clearfix'>No courses found that match your search criteria.</li>",blueprintRow:"<tr><td>{% courseCode %}</td><td>{% name %}</td><td><span class='ch-{% answers %}'></span></td><td><a target='_blank' href='"+CHoice.url+"document/exam/{% documentId %}' class='button tiny'><span class='ch-file-o'></span></a></td></tr>",blueprintRowNoResult:"<tr><td colspan='4'>No exams available yet.</td></tr>"},CHoice.initChoice(),CHoice.binds()},binds:function(){e("#searchQuery").on("keyup",CHoice._debounce(CHoice.searchCourses,250)),e("#searchStudy, #searchProgram").on("change",CHoice._debounce(CHoice.searchCourses,250))},initChoice:function(){e.ajax({url:CHoice.url+"course/active",async:!1,dataType:"json",success:function(e){CHoice.handleGetCourses(e)}})},searchCourses:function(){e.ajax({url:CHoice.url+"course/active/search",data:{study:e("#searchStudy").val(),program:e("#searchProgram").val(),query:e("#searchQuery").val()},async:!1,dataType:"json",success:function(e){CHoice.handleGetCourses(e)}})},handleGetCourses:function(t){e("#choice-accordion").empty(),t.content.length>0?e.each(t.content,function(t,o){var c=o.code+" "+o.name,n=CHoice.settings.blueprintItem.split("{% courseName %}").join(c),a=CHoice.handleGetCourseExamResponse(o.exam);n=n.split("{% content %}").join(a),e("#choice-accordion").append(n)}):e("#choice-accordion").append(CHoice.settings.blueprintItemNoResult),Foundation.reInit(e("#choice-accordion"))},handleGetCourseExamResponse:function(t){var o="";const c=["January","February","March","April","May","June","Juli","August","September","October","November","December"];return t.length>0?e.each(t,function(e,t){var n=CHoice.settings.blueprintRow.split("{% courseCode %}").join(t.course.code),a=c[parseInt(t.date.split("-")[1])-1],i=t.name+" "+t.date.split("-")[2]+" "+a+" "+t.date.split("-")[0];n=(n=(n=n.split("{% name %}").join(i)).split("{% documentId %}").join(t.id)).split("{% answers %}").join(t.includingAnswers?"check":"ban"),o+=n}):o=CHoice.settings.blueprintRowNoResult,o},_debounce:function(e,t,o){var c;return function(){var n=this,a=arguments,i=o&&!c;clearTimeout(c),c=setTimeout(function(){c=null,o||e.apply(n,a)},t),i&&e.apply(n,a)}}}}(jQuery);
